/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";(()=>{function e(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)e[i]=o[i]}return e}const t=function t(o,i){function n(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in r)r[a]&&(s+="; "+a,!0!==r[a]&&(s+="="+r[a].split(";")[0]));return document.cookie=t+"="+o.write(n,t)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],i={},n=0;n<t.length;n++){var r=t[n].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(i[a]=o.read(s,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(t,o){n(t,"",e({},o,{expires:-1}))},withAttributes:function(o){return t(this.converter,e({},this.attributes,o))},withConverter:function(o){return t(e({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(o)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),o=document.getElementById("kokku-cookie-banner"),i=document.getElementById("kokku-cookie-banner__gtm-id").value,n=document.getElementById("marketing-cookies"),r=document.getElementById("statistics-cookies"),s=document.getElementById("categorised-cookies"),a=document.getElementById("kokku-cookie-banner__settings"),c=document.querySelector(".kokku-cookie-banner__options"),k=document.getElementById("kokku-cookie-banner__accept-selected"),d=document.getElementById("kokku-cookie-banner__accept-all"),l=document.querySelectorAll(".kokku-cookie-banner__link");let u=new class{constructor(e,t,o,i,n){this.cookieBanner=e,this.gtmID=t,this.marketingCookieEnabled=!1,this.statisticsCookieEnabled=!1,this.categorisedCookieEnabled=!1,this.marketingCheckbox=o,this.statisticsCheckbox=i,this.categorisedCheckbox=n}init(){"object"==typeof t?this.cookieBanner?(this.updateCookieBannerDisplay(),"true"===this.getCookie("tracking-opt-in")&&this.fireGTM()):console.log("Cookie banner markup not found"):console.log("Cookie library not found")}setCookies(){const e=this.marketingCookieEnabled?"true":"false",o=this.statisticsCookieEnabled?"true":"false",i=this.categorisedCookieEnabled?"true":"false";t.set("tracking-opt-in","true",{expires:365}),t.set("mark-tra-opt-in",e,{expires:365}),t.set("sta-tra-opt-in",o,{expires:365}),t.set("cat-tra-opt-in",i,{expires:365}),t.set("hide-cookie-banner","true",{expires:365})}removeCookies(e){e.forEach((e=>{t.remove(e)}))}getCookie(e){return t.get(e)}updateCookieBannerDisplay(){"true"===t.get("hide-cookie-banner")?(this.cookieBanner.style.display="none",document.body.classList.remove("kokku-cookie-banner-active")):(this.cookieBanner.style.display="block",document.body.classList.add("kokku-cookie-banner-active")),null!==this.marketingCheckbox&&(this.marketingCheckbox.checked="true"===t.get("mark-tra-opt-in")),null!==this.statisticsCheckbox&&(this.statisticsCheckbox.checked="true"===t.get("sta-tra-opt-in")),null!==this.categorisedCheckbox&&(this.categorisedCheckbox.checked="true"===t.get("cat-tra-opt-in"))}fireGTM(){console.log("Firing Google Tag Manager"),function(e,t,o,i,n,r){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=t.getElementsByTagName(o)[0],a=t.getElementById(r),c=t.createElement(o);null!==a?a.src="https://www.googletagmanager.com/gtm.js?id="+n:(c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id="+n,c.id=r,s.parentNode.insertBefore(c,s))}(window,document,"script","dataLayer",this.gtmID,"gtm-script")}}(o,i,n,r,s);u.init(),a&&a.addEventListener("click",(e=>{c.classList.toggle("d-none"),e.target.classList.add("d-none"),k.classList.remove("d-none")})),k&&k.addEventListener("click",(()=>{u.marketingCookieEnabled=n&&n.checked,u.statisticsCookieEnabled=r&&r.checked,u.categorisedCookieEnabled=s&&s.checked,u.setCookies(),u.updateCookieBannerDisplay(),u.fireGTM()})),d&&d.addEventListener("click",(()=>{u.marketingCookieEnabled=!0,u.statisticsCookieEnabled=!0,u.categorisedCookieEnabled=!0,u.setCookies(),u.updateCookieBannerDisplay(),u.fireGTM()})),l.forEach((e=>{e&&e.addEventListener("click",(e=>{e.preventDefault(),u.removeCookies(["hide-cookie-banner"]),u.updateCookieBannerDisplay()}))}))})()})();